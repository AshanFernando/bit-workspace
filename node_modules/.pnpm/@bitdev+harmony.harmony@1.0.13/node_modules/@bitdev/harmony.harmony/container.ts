import { Extension } from './extension/extension.js';

export default class Container {
  constructor(private instances = new Map()) {}

  register<AnyExtension>(token: string, instance: AnyExtension) {
    this.instances.set(token, instance);
  }

  resolve(token: string) {
    return this.instances.get(token);
  }

  static loadWith(defaults: Extension[]) {
    const extensionMap = new Map(defaults.map(extension => [extension.name, extension]));

    return new Container(extensionMap);
  }
}
