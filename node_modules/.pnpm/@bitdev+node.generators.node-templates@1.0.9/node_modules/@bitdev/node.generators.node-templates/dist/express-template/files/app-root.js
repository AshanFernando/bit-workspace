"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppRootFile = void 0;
const AppRootFile = (context) => {
    const { name, namePascalCase, nameCamelCase } = context;
    return {
        relativePath: `${name}.app-root.ts`,
        content: `import express from 'express';
import { ${namePascalCase} } from "./${name}.js";

export function run() {
  const app = express();
  const ${nameCamelCase} = ${namePascalCase}.from();
  const port = process.env.PORT || 3000;

  /**
   * learn more on the express docs:
   * https://expressjs.com/en/starter/hello-world.html
   */
  app.get('/', async (req, res) => {
    const greeting = await ${nameCamelCase}.getHello();
    res.send(greeting);
  });
  
  const server = app.listen(port, () => {
    console.log(\`ðŸš€  Server ready at: http://localhost:\${port}\`);
  });

  return {
    port,
    // implement stop to support HMR.
    stop: async () => {
      server.closeAllConnections();
      server.close();
    }
  };
}
`,
    };
};
exports.AppRootFile = AppRootFile;
//# sourceMappingURL=app-root.js.map