import type { AppBuildResult } from "@teambit/application";
import { PlatformLayer } from "./platform-layer.js";
import { PlatformBuildContext } from "./platform-build-context.js";

export type PlatformBuildFn = (context: PlatformBuildContext) => Promise<AppBuildResult>;
// FIX "ANY" AFTER BIT RELEASE with ApplicationDeployment type
export type PlatformDeployFn = (context: PlatformBuildContext) => Promise<any>;

export type PlatformOptions = {
  /**
   * name of the platform. e.g. acme-platform, or airbnb
   */
  name: string;

  /**
   * backend services to load.
   */
  backends?: PlatformLayer;

  /**
   * frontend services to load.
   */
  frontends?: PlatformLayer;

  /**
   * build function for the platform.
   */
  build?(context: PlatformBuildContext): Promise<AppBuildResult>;

  /**
   * deploy function for the platform
   */
  deploy?(context: PlatformBuildContext): Promise<any>;
};
