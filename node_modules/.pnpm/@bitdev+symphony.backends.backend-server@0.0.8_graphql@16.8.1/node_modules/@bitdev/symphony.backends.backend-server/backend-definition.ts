import { SlotRegistry } from "@bitdev/harmony.harmony";
import { BackendServer, DeployOptions } from "./backend-server.js";
import { GqlSchema } from "./gql-schema.js";
import { DefaultRESTRoute } from "./rest-route.js";

export type BackendServerDefinition = {
  /**
   * name of the servers.
   * default to Component ID.
   */
  name?: string;

  /**
   * alternate server implementation.
   * uses platform default backend by default.
   */
  server?: BackendServer;

  /**
   * routes of the backend.
   */
  routes?: DefaultRESTRoute[]

  /**
   * gql schema.
   */
  gql?: GqlSchema;

  /**
   * deploy the backend.
   */
  deploy?: DeployOptions;
};

export type BackendSlot = SlotRegistry<BackendServerDefinition[]>;
